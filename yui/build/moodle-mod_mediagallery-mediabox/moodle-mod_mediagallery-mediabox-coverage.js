if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/moodle-mod_mediagallery-mediabox/moodle-mod_mediagallery-mediabox.js']) {
   __coverage__['build/moodle-mod_mediagallery-mediabox/moodle-mod_mediagallery-mediabox.js'] = {"path":"build/moodle-mod_mediagallery-mediabox/moodle-mod_mediagallery-mediabox.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":44},"end":{"line":1,"column":63}}},"2":{"name":"(anonymous_2)","line":3,"loc":{"start":{"line":3,"column":15},"end":{"line":3,"column":26}}},"3":{"name":"(anonymous_3)","line":8,"loc":{"start":{"line":8,"column":18},"end":{"line":8,"column":35}}},"4":{"name":"(anonymous_4)","line":21,"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":23}}},"5":{"name":"(anonymous_5)","line":50,"loc":{"start":{"line":50,"column":33},"end":{"line":50,"column":44}}},"6":{"name":"(anonymous_6)","line":54,"loc":{"start":{"line":54,"column":28},"end":{"line":54,"column":40}}},"7":{"name":"(anonymous_7)","line":63,"loc":{"start":{"line":63,"column":70},"end":{"line":63,"column":81}}},"8":{"name":"(anonymous_8)","line":78,"loc":{"start":{"line":78,"column":28},"end":{"line":78,"column":40}}},"9":{"name":"(anonymous_9)","line":91,"loc":{"start":{"line":91,"column":28},"end":{"line":91,"column":40}}},"10":{"name":"(anonymous_10)","line":113,"loc":{"start":{"line":113,"column":30},"end":{"line":113,"column":54}}},"11":{"name":"(anonymous_11)","line":127,"loc":{"start":{"line":127,"column":27},"end":{"line":127,"column":39}}},"12":{"name":"(anonymous_12)","line":131,"loc":{"start":{"line":131,"column":28},"end":{"line":131,"column":40}}},"13":{"name":"(anonymous_13)","line":135,"loc":{"start":{"line":135,"column":61},"end":{"line":135,"column":72}}},"14":{"name":"(anonymous_14)","line":144,"loc":{"start":{"line":144,"column":61},"end":{"line":144,"column":72}}},"15":{"name":"(anonymous_15)","line":153,"loc":{"start":{"line":153,"column":61},"end":{"line":153,"column":72}}},"16":{"name":"(anonymous_16)","line":158,"loc":{"start":{"line":158,"column":64},"end":{"line":158,"column":75}}},"17":{"name":"(anonymous_17)","line":164,"loc":{"start":{"line":164,"column":71},"end":{"line":164,"column":82}}},"18":{"name":"(anonymous_18)","line":173,"loc":{"start":{"line":173,"column":17},"end":{"line":173,"column":38}}},"19":{"name":"(anonymous_19)","line":193,"loc":{"start":{"line":193,"column":27},"end":{"line":193,"column":38}}},"20":{"name":"(anonymous_20)","line":217,"loc":{"start":{"line":217,"column":26},"end":{"line":217,"column":50}}},"21":{"name":"(anonymous_21)","line":286,"loc":{"start":{"line":286,"column":17},"end":{"line":286,"column":28}}},"22":{"name":"(anonymous_22)","line":290,"loc":{"start":{"line":290,"column":19},"end":{"line":290,"column":32}}},"23":{"name":"(anonymous_23)","line":298,"loc":{"start":{"line":298,"column":26},"end":{"line":298,"column":50}}},"24":{"name":"(anonymous_24)","line":326,"loc":{"start":{"line":326,"column":13},"end":{"line":326,"column":24}}},"25":{"name":"(anonymous_25)","line":328,"loc":{"start":{"line":328,"column":125},"end":{"line":328,"column":137}}},"26":{"name":"(anonymous_26)","line":335,"loc":{"start":{"line":335,"column":16},"end":{"line":335,"column":27}}},"27":{"name":"(anonymous_27)","line":337,"loc":{"start":{"line":337,"column":55},"end":{"line":337,"column":67}}},"28":{"name":"(anonymous_28)","line":342,"loc":{"start":{"line":342,"column":21},"end":{"line":342,"column":33}}},"29":{"name":"(anonymous_29)","line":362,"loc":{"start":{"line":362,"column":21},"end":{"line":362,"column":45}}},"30":{"name":"(anonymous_30)","line":422,"loc":{"start":{"line":422,"column":20},"end":{"line":422,"column":32}}},"31":{"name":"(anonymous_31)","line":429,"loc":{"start":{"line":429,"column":19},"end":{"line":429,"column":30}}},"32":{"name":"(anonymous_32)","line":436,"loc":{"start":{"line":436,"column":12},"end":{"line":436,"column":29}}},"33":{"name":"(anonymous_33)","line":438,"loc":{"start":{"line":438,"column":29},"end":{"line":438,"column":40}}},"34":{"name":"(anonymous_34)","line":462,"loc":{"start":{"line":462,"column":23},"end":{"line":462,"column":34}}},"35":{"name":"(anonymous_35)","line":473,"loc":{"start":{"line":473,"column":11},"end":{"line":473,"column":22}}},"36":{"name":"(anonymous_36)","line":483,"loc":{"start":{"line":483,"column":19},"end":{"line":483,"column":46}}},"37":{"name":"(anonymous_37)","line":507,"loc":{"start":{"line":507,"column":23},"end":{"line":507,"column":37}}},"38":{"name":"(anonymous_38)","line":513,"loc":{"start":{"line":513,"column":23},"end":{"line":513,"column":37}}},"39":{"name":"(anonymous_39)","line":519,"loc":{"start":{"line":519,"column":23},"end":{"line":519,"column":37}}},"40":{"name":"(anonymous_40)","line":525,"loc":{"start":{"line":525,"column":23},"end":{"line":525,"column":37}}},"41":{"name":"(anonymous_41)","line":531,"loc":{"start":{"line":531,"column":23},"end":{"line":531,"column":37}}},"42":{"name":"(anonymous_42)","line":539,"loc":{"start":{"line":539,"column":35},"end":{"line":539,"column":52}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":544,"column":65}},"2":{"start":{"line":3,"column":0},"end":{"line":5,"column":2}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":59}},"4":{"start":{"line":7,"column":0},"end":{"line":536,"column":3}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":22}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":21}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":33}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":32}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":32}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":31}},"11":{"start":{"line":15,"column":8},"end":{"line":15,"column":32}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":31}},"13":{"start":{"line":17,"column":8},"end":{"line":17,"column":32}},"14":{"start":{"line":18,"column":8},"end":{"line":18,"column":100}},"15":{"start":{"line":22,"column":8},"end":{"line":22,"column":25}},"16":{"start":{"line":23,"column":8},"end":{"line":23,"column":40}},"17":{"start":{"line":24,"column":8},"end":{"line":24,"column":44}},"18":{"start":{"line":25,"column":8},"end":{"line":25,"column":62}},"19":{"start":{"line":26,"column":8},"end":{"line":26,"column":61}},"20":{"start":{"line":27,"column":8},"end":{"line":27,"column":68}},"21":{"start":{"line":28,"column":8},"end":{"line":28,"column":52}},"22":{"start":{"line":29,"column":8},"end":{"line":29,"column":152}},"23":{"start":{"line":30,"column":8},"end":{"line":30,"column":134}},"24":{"start":{"line":31,"column":8},"end":{"line":31,"column":135}},"25":{"start":{"line":32,"column":8},"end":{"line":32,"column":146}},"26":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"27":{"start":{"line":34,"column":12},"end":{"line":34,"column":162}},"28":{"start":{"line":36,"column":8},"end":{"line":36,"column":140}},"29":{"start":{"line":38,"column":8},"end":{"line":38,"column":116}},"30":{"start":{"line":39,"column":8},"end":{"line":39,"column":102}},"31":{"start":{"line":40,"column":8},"end":{"line":40,"column":133}},"32":{"start":{"line":41,"column":8},"end":{"line":41,"column":142}},"33":{"start":{"line":42,"column":8},"end":{"line":42,"column":49}},"34":{"start":{"line":43,"column":8},"end":{"line":43,"column":50}},"35":{"start":{"line":44,"column":8},"end":{"line":44,"column":43}},"36":{"start":{"line":45,"column":8},"end":{"line":45,"column":48}},"37":{"start":{"line":46,"column":8},"end":{"line":46,"column":29}},"38":{"start":{"line":48,"column":8},"end":{"line":48,"column":121}},"39":{"start":{"line":50,"column":8},"end":{"line":52,"column":11}},"40":{"start":{"line":51,"column":12},"end":{"line":51,"column":25}},"41":{"start":{"line":54,"column":8},"end":{"line":59,"column":72}},"42":{"start":{"line":55,"column":12},"end":{"line":57,"column":13}},"43":{"start":{"line":56,"column":16},"end":{"line":56,"column":29}},"44":{"start":{"line":58,"column":12},"end":{"line":58,"column":25}},"45":{"start":{"line":62,"column":8},"end":{"line":62,"column":49}},"46":{"start":{"line":63,"column":8},"end":{"line":67,"column":11}},"47":{"start":{"line":64,"column":12},"end":{"line":64,"column":56}},"48":{"start":{"line":65,"column":12},"end":{"line":65,"column":34}},"49":{"start":{"line":66,"column":12},"end":{"line":66,"column":35}},"50":{"start":{"line":69,"column":8},"end":{"line":77,"column":9}},"51":{"start":{"line":70,"column":12},"end":{"line":70,"column":71}},"52":{"start":{"line":71,"column":12},"end":{"line":71,"column":47}},"53":{"start":{"line":72,"column":12},"end":{"line":72,"column":47}},"54":{"start":{"line":73,"column":12},"end":{"line":73,"column":84}},"55":{"start":{"line":74,"column":12},"end":{"line":74,"column":35}},"56":{"start":{"line":76,"column":12},"end":{"line":76,"column":59}},"57":{"start":{"line":78,"column":8},"end":{"line":81,"column":43}},"58":{"start":{"line":79,"column":12},"end":{"line":79,"column":31}},"59":{"start":{"line":80,"column":12},"end":{"line":80,"column":70}},"60":{"start":{"line":84,"column":8},"end":{"line":88,"column":9}},"61":{"start":{"line":85,"column":12},"end":{"line":87,"column":43}},"62":{"start":{"line":91,"column":8},"end":{"line":125,"column":51}},"63":{"start":{"line":92,"column":12},"end":{"line":92,"column":31}},"64":{"start":{"line":94,"column":12},"end":{"line":94,"column":32}},"65":{"start":{"line":95,"column":12},"end":{"line":95,"column":30}},"66":{"start":{"line":96,"column":12},"end":{"line":96,"column":32}},"67":{"start":{"line":97,"column":12},"end":{"line":97,"column":52}},"68":{"start":{"line":98,"column":12},"end":{"line":103,"column":13}},"69":{"start":{"line":99,"column":16},"end":{"line":99,"column":34}},"70":{"start":{"line":100,"column":16},"end":{"line":100,"column":30}},"71":{"start":{"line":101,"column":16},"end":{"line":101,"column":30}},"72":{"start":{"line":102,"column":16},"end":{"line":102,"column":50}},"73":{"start":{"line":105,"column":12},"end":{"line":105,"column":49}},"74":{"start":{"line":106,"column":12},"end":{"line":106,"column":97}},"75":{"start":{"line":107,"column":12},"end":{"line":107,"column":33}},"76":{"start":{"line":109,"column":12},"end":{"line":120,"column":14}},"77":{"start":{"line":114,"column":24},"end":{"line":114,"column":69}},"78":{"start":{"line":115,"column":24},"end":{"line":115,"column":66}},"79":{"start":{"line":122,"column":12},"end":{"line":122,"column":51}},"80":{"start":{"line":123,"column":12},"end":{"line":123,"column":90}},"81":{"start":{"line":127,"column":8},"end":{"line":129,"column":55}},"82":{"start":{"line":128,"column":12},"end":{"line":128,"column":30}},"83":{"start":{"line":131,"column":8},"end":{"line":133,"column":55}},"84":{"start":{"line":132,"column":12},"end":{"line":132,"column":31}},"85":{"start":{"line":135,"column":8},"end":{"line":142,"column":11}},"86":{"start":{"line":136,"column":12},"end":{"line":140,"column":13}},"87":{"start":{"line":137,"column":16},"end":{"line":137,"column":57}},"88":{"start":{"line":139,"column":16},"end":{"line":139,"column":61}},"89":{"start":{"line":141,"column":12},"end":{"line":141,"column":25}},"90":{"start":{"line":144,"column":8},"end":{"line":151,"column":11}},"91":{"start":{"line":145,"column":12},"end":{"line":149,"column":13}},"92":{"start":{"line":146,"column":16},"end":{"line":146,"column":36}},"93":{"start":{"line":148,"column":16},"end":{"line":148,"column":61}},"94":{"start":{"line":150,"column":12},"end":{"line":150,"column":25}},"95":{"start":{"line":153,"column":8},"end":{"line":156,"column":11}},"96":{"start":{"line":154,"column":12},"end":{"line":154,"column":96}},"97":{"start":{"line":155,"column":12},"end":{"line":155,"column":25}},"98":{"start":{"line":158,"column":8},"end":{"line":161,"column":11}},"99":{"start":{"line":159,"column":12},"end":{"line":159,"column":25}},"100":{"start":{"line":160,"column":12},"end":{"line":160,"column":25}},"101":{"start":{"line":163,"column":8},"end":{"line":169,"column":9}},"102":{"start":{"line":164,"column":12},"end":{"line":168,"column":15}},"103":{"start":{"line":165,"column":16},"end":{"line":165,"column":63}},"104":{"start":{"line":166,"column":16},"end":{"line":166,"column":41}},"105":{"start":{"line":167,"column":16},"end":{"line":167,"column":29}},"106":{"start":{"line":174,"column":8},"end":{"line":176,"column":9}},"107":{"start":{"line":175,"column":12},"end":{"line":175,"column":19}},"108":{"start":{"line":177,"column":8},"end":{"line":177,"column":25}},"109":{"start":{"line":178,"column":8},"end":{"line":178,"column":49}},"110":{"start":{"line":179,"column":8},"end":{"line":179,"column":72}},"111":{"start":{"line":180,"column":8},"end":{"line":180,"column":68}},"112":{"start":{"line":181,"column":8},"end":{"line":181,"column":24}},"113":{"start":{"line":183,"column":8},"end":{"line":183,"column":27}},"114":{"start":{"line":184,"column":8},"end":{"line":186,"column":9}},"115":{"start":{"line":185,"column":12},"end":{"line":185,"column":43}},"116":{"start":{"line":187,"column":8},"end":{"line":187,"column":82}},"117":{"start":{"line":189,"column":8},"end":{"line":189,"column":32}},"118":{"start":{"line":192,"column":8},"end":{"line":201,"column":9}},"119":{"start":{"line":193,"column":12},"end":{"line":199,"column":14}},"120":{"start":{"line":194,"column":16},"end":{"line":194,"column":51}},"121":{"start":{"line":195,"column":16},"end":{"line":195,"column":87}},"122":{"start":{"line":196,"column":16},"end":{"line":196,"column":44}},"123":{"start":{"line":197,"column":16},"end":{"line":197,"column":38}},"124":{"start":{"line":198,"column":16},"end":{"line":198,"column":64}},"125":{"start":{"line":200,"column":12},"end":{"line":200,"column":68}},"126":{"start":{"line":203,"column":8},"end":{"line":203,"column":53}},"127":{"start":{"line":204,"column":8},"end":{"line":204,"column":50}},"128":{"start":{"line":206,"column":8},"end":{"line":206,"column":51}},"129":{"start":{"line":207,"column":8},"end":{"line":207,"column":25}},"130":{"start":{"line":209,"column":8},"end":{"line":209,"column":44}},"131":{"start":{"line":210,"column":8},"end":{"line":210,"column":73}},"132":{"start":{"line":211,"column":8},"end":{"line":211,"column":33}},"133":{"start":{"line":213,"column":8},"end":{"line":262,"column":10}},"134":{"start":{"line":218,"column":20},"end":{"line":218,"column":29}},"135":{"start":{"line":219,"column":20},"end":{"line":223,"column":21}},"136":{"start":{"line":220,"column":24},"end":{"line":220,"column":65}},"137":{"start":{"line":222,"column":24},"end":{"line":222,"column":31}},"138":{"start":{"line":224,"column":20},"end":{"line":233,"column":21}},"139":{"start":{"line":225,"column":24},"end":{"line":227,"column":25}},"140":{"start":{"line":226,"column":28},"end":{"line":226,"column":37}},"141":{"start":{"line":228,"column":24},"end":{"line":232,"column":45}},"142":{"start":{"line":235,"column":20},"end":{"line":246,"column":21}},"143":{"start":{"line":236,"column":24},"end":{"line":236,"column":81}},"144":{"start":{"line":237,"column":24},"end":{"line":244,"column":26}},"145":{"start":{"line":245,"column":24},"end":{"line":245,"column":53}},"146":{"start":{"line":247,"column":20},"end":{"line":257,"column":21}},"147":{"start":{"line":248,"column":24},"end":{"line":248,"column":62}},"148":{"start":{"line":249,"column":24},"end":{"line":254,"column":25}},"149":{"start":{"line":250,"column":28},"end":{"line":250,"column":64}},"150":{"start":{"line":251,"column":28},"end":{"line":251,"column":107}},"151":{"start":{"line":253,"column":28},"end":{"line":253,"column":105}},"152":{"start":{"line":256,"column":24},"end":{"line":256,"column":70}},"153":{"start":{"line":263,"column":8},"end":{"line":265,"column":9}},"154":{"start":{"line":264,"column":12},"end":{"line":264,"column":50}},"155":{"start":{"line":267,"column":8},"end":{"line":274,"column":9}},"156":{"start":{"line":268,"column":12},"end":{"line":268,"column":39}},"157":{"start":{"line":269,"column":12},"end":{"line":273,"column":13}},"158":{"start":{"line":270,"column":16},"end":{"line":270,"column":66}},"159":{"start":{"line":272,"column":16},"end":{"line":272,"column":66}},"160":{"start":{"line":277,"column":8},"end":{"line":282,"column":9}},"161":{"start":{"line":278,"column":12},"end":{"line":278,"column":28}},"162":{"start":{"line":280,"column":12},"end":{"line":280,"column":224}},"163":{"start":{"line":281,"column":12},"end":{"line":281,"column":34}},"164":{"start":{"line":287,"column":8},"end":{"line":287,"column":34}},"165":{"start":{"line":291,"column":8},"end":{"line":291,"column":44}},"166":{"start":{"line":292,"column":8},"end":{"line":292,"column":21}},"167":{"start":{"line":293,"column":8},"end":{"line":293,"column":30}},"168":{"start":{"line":294,"column":8},"end":{"line":321,"column":10}},"169":{"start":{"line":299,"column":20},"end":{"line":299,"column":65}},"170":{"start":{"line":300,"column":20},"end":{"line":306,"column":21}},"171":{"start":{"line":301,"column":24},"end":{"line":301,"column":69}},"172":{"start":{"line":302,"column":24},"end":{"line":302,"column":74}},"173":{"start":{"line":304,"column":24},"end":{"line":304,"column":70}},"174":{"start":{"line":305,"column":24},"end":{"line":305,"column":74}},"175":{"start":{"line":307,"column":20},"end":{"line":307,"column":62}},"176":{"start":{"line":308,"column":20},"end":{"line":316,"column":21}},"177":{"start":{"line":309,"column":24},"end":{"line":309,"column":77}},"178":{"start":{"line":310,"column":24},"end":{"line":315,"column":25}},"179":{"start":{"line":311,"column":28},"end":{"line":311,"column":52}},"180":{"start":{"line":312,"column":28},"end":{"line":312,"column":85}},"181":{"start":{"line":314,"column":28},"end":{"line":314,"column":103}},"182":{"start":{"line":323,"column":8},"end":{"line":323,"column":46}},"183":{"start":{"line":327,"column":8},"end":{"line":327,"column":25}},"184":{"start":{"line":328,"column":8},"end":{"line":332,"column":11}},"185":{"start":{"line":329,"column":12},"end":{"line":329,"column":31}},"186":{"start":{"line":330,"column":12},"end":{"line":330,"column":48}},"187":{"start":{"line":331,"column":12},"end":{"line":331,"column":25}},"188":{"start":{"line":336,"column":8},"end":{"line":336,"column":25}},"189":{"start":{"line":337,"column":8},"end":{"line":339,"column":11}},"190":{"start":{"line":338,"column":12},"end":{"line":338,"column":36}},"191":{"start":{"line":343,"column":8},"end":{"line":343,"column":77}},"192":{"start":{"line":344,"column":8},"end":{"line":344,"column":25}},"193":{"start":{"line":345,"column":8},"end":{"line":345,"column":31}},"194":{"start":{"line":346,"column":8},"end":{"line":346,"column":32}},"195":{"start":{"line":347,"column":8},"end":{"line":347,"column":32}},"196":{"start":{"line":348,"column":8},"end":{"line":348,"column":57}},"197":{"start":{"line":349,"column":8},"end":{"line":359,"column":9}},"198":{"start":{"line":350,"column":12},"end":{"line":350,"column":24}},"199":{"start":{"line":351,"column":15},"end":{"line":359,"column":9}},"200":{"start":{"line":352,"column":12},"end":{"line":354,"column":13}},"201":{"start":{"line":353,"column":16},"end":{"line":353,"column":59}},"202":{"start":{"line":355,"column":15},"end":{"line":359,"column":9}},"203":{"start":{"line":356,"column":12},"end":{"line":358,"column":13}},"204":{"start":{"line":357,"column":16},"end":{"line":357,"column":59}},"205":{"start":{"line":363,"column":8},"end":{"line":363,"column":55}},"206":{"start":{"line":364,"column":8},"end":{"line":364,"column":49}},"207":{"start":{"line":365,"column":8},"end":{"line":365,"column":61}},"208":{"start":{"line":367,"column":8},"end":{"line":382,"column":9}},"209":{"start":{"line":369,"column":12},"end":{"line":375,"column":13}},"210":{"start":{"line":370,"column":16},"end":{"line":370,"column":41}},"211":{"start":{"line":371,"column":16},"end":{"line":371,"column":43}},"212":{"start":{"line":373,"column":16},"end":{"line":373,"column":56}},"213":{"start":{"line":374,"column":16},"end":{"line":374,"column":58}},"214":{"start":{"line":376,"column":15},"end":{"line":382,"column":9}},"215":{"start":{"line":377,"column":12},"end":{"line":377,"column":37}},"216":{"start":{"line":378,"column":12},"end":{"line":378,"column":39}},"217":{"start":{"line":379,"column":15},"end":{"line":382,"column":9}},"218":{"start":{"line":380,"column":12},"end":{"line":380,"column":53}},"219":{"start":{"line":381,"column":12},"end":{"line":381,"column":55}},"220":{"start":{"line":384,"column":8},"end":{"line":384,"column":53}},"221":{"start":{"line":385,"column":8},"end":{"line":385,"column":55}},"222":{"start":{"line":387,"column":8},"end":{"line":387,"column":54}},"223":{"start":{"line":388,"column":8},"end":{"line":388,"column":55}},"224":{"start":{"line":390,"column":8},"end":{"line":390,"column":26}},"225":{"start":{"line":391,"column":8},"end":{"line":391,"column":27}},"226":{"start":{"line":392,"column":8},"end":{"line":409,"column":9}},"227":{"start":{"line":393,"column":12},"end":{"line":403,"column":13}},"228":{"start":{"line":394,"column":16},"end":{"line":394,"column":36}},"229":{"start":{"line":395,"column":16},"end":{"line":395,"column":70}},"230":{"start":{"line":396,"column":16},"end":{"line":396,"column":31}},"231":{"start":{"line":397,"column":16},"end":{"line":397,"column":56}},"232":{"start":{"line":399,"column":16},"end":{"line":399,"column":38}},"233":{"start":{"line":400,"column":16},"end":{"line":400,"column":70}},"234":{"start":{"line":401,"column":16},"end":{"line":401,"column":30}},"235":{"start":{"line":402,"column":16},"end":{"line":402,"column":77}},"236":{"start":{"line":404,"column":12},"end":{"line":404,"column":29}},"237":{"start":{"line":405,"column":12},"end":{"line":405,"column":30}},"238":{"start":{"line":407,"column":12},"end":{"line":407,"column":70}},"239":{"start":{"line":408,"column":12},"end":{"line":408,"column":70}},"240":{"start":{"line":410,"column":8},"end":{"line":410,"column":49}},"241":{"start":{"line":411,"column":8},"end":{"line":411,"column":51}},"242":{"start":{"line":412,"column":8},"end":{"line":416,"column":9}},"243":{"start":{"line":413,"column":12},"end":{"line":415,"column":13}},"244":{"start":{"line":414,"column":16},"end":{"line":414,"column":79}},"245":{"start":{"line":418,"column":8},"end":{"line":418,"column":50}},"246":{"start":{"line":419,"column":8},"end":{"line":419,"column":52}},"247":{"start":{"line":423,"column":8},"end":{"line":423,"column":58}},"248":{"start":{"line":424,"column":8},"end":{"line":424,"column":60}},"249":{"start":{"line":425,"column":8},"end":{"line":425,"column":54}},"250":{"start":{"line":426,"column":8},"end":{"line":426,"column":56}},"251":{"start":{"line":430,"column":8},"end":{"line":432,"column":9}},"252":{"start":{"line":431,"column":12},"end":{"line":431,"column":21}},"253":{"start":{"line":433,"column":8},"end":{"line":433,"column":34}},"254":{"start":{"line":437,"column":8},"end":{"line":437,"column":25}},"255":{"start":{"line":438,"column":8},"end":{"line":441,"column":11}},"256":{"start":{"line":439,"column":12},"end":{"line":439,"column":34}},"257":{"start":{"line":440,"column":12},"end":{"line":440,"column":35}},"258":{"start":{"line":442,"column":8},"end":{"line":442,"column":58}},"259":{"start":{"line":443,"column":8},"end":{"line":443,"column":50}},"260":{"start":{"line":444,"column":8},"end":{"line":444,"column":51}},"261":{"start":{"line":446,"column":8},"end":{"line":446,"column":27}},"262":{"start":{"line":447,"column":8},"end":{"line":451,"column":9}},"263":{"start":{"line":448,"column":12},"end":{"line":450,"column":13}},"264":{"start":{"line":449,"column":16},"end":{"line":449,"column":31}},"265":{"start":{"line":453,"column":8},"end":{"line":455,"column":9}},"266":{"start":{"line":454,"column":12},"end":{"line":454,"column":47}},"267":{"start":{"line":457,"column":8},"end":{"line":457,"column":32}},"268":{"start":{"line":458,"column":8},"end":{"line":458,"column":36}},"269":{"start":{"line":459,"column":8},"end":{"line":459,"column":25}},"270":{"start":{"line":463,"column":8},"end":{"line":465,"column":9}},"271":{"start":{"line":464,"column":12},"end":{"line":464,"column":19}},"272":{"start":{"line":466,"column":8},"end":{"line":466,"column":72}},"273":{"start":{"line":467,"column":8},"end":{"line":469,"column":9}},"274":{"start":{"line":468,"column":12},"end":{"line":468,"column":76}},"275":{"start":{"line":470,"column":8},"end":{"line":470,"column":83}},"276":{"start":{"line":474,"column":8},"end":{"line":476,"column":9}},"277":{"start":{"line":475,"column":12},"end":{"line":475,"column":30}},"278":{"start":{"line":477,"column":8},"end":{"line":477,"column":26}},"279":{"start":{"line":478,"column":8},"end":{"line":478,"column":61}},"280":{"start":{"line":479,"column":8},"end":{"line":479,"column":45}},"281":{"start":{"line":480,"column":8},"end":{"line":480,"column":46}},"282":{"start":{"line":484,"column":8},"end":{"line":484,"column":21}},"283":{"start":{"line":485,"column":8},"end":{"line":498,"column":9}},"284":{"start":{"line":486,"column":12},"end":{"line":486,"column":39}},"285":{"start":{"line":487,"column":12},"end":{"line":487,"column":55}},"286":{"start":{"line":488,"column":12},"end":{"line":491,"column":13}},"287":{"start":{"line":489,"column":16},"end":{"line":489,"column":34}},"288":{"start":{"line":490,"column":16},"end":{"line":490,"column":57}},"289":{"start":{"line":492,"column":12},"end":{"line":492,"column":29}},"290":{"start":{"line":493,"column":12},"end":{"line":497,"column":13}},"291":{"start":{"line":494,"column":16},"end":{"line":494,"column":53}},"292":{"start":{"line":496,"column":16},"end":{"line":496,"column":52}},"293":{"start":{"line":499,"column":8},"end":{"line":499,"column":48}},"294":{"start":{"line":508,"column":16},"end":{"line":508,"column":45}},"295":{"start":{"line":514,"column":16},"end":{"line":514,"column":45}},"296":{"start":{"line":520,"column":16},"end":{"line":520,"column":44}},"297":{"start":{"line":526,"column":16},"end":{"line":526,"column":44}},"298":{"start":{"line":532,"column":16},"end":{"line":532,"column":44}},"299":{"start":{"line":538,"column":0},"end":{"line":538,"column":46}},"300":{"start":{"line":539,"column":0},"end":{"line":541,"column":2}},"301":{"start":{"line":540,"column":4},"end":{"line":540,"column":32}}},"branchMap":{"1":{"line":18,"type":"binary-expr","locations":[{"start":{"line":18,"column":32},"end":{"line":18,"column":50}},{"start":{"line":18,"column":54},"end":{"line":18,"column":99}}]},"2":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":33,"column":8}},{"start":{"line":33,"column":8},"end":{"line":33,"column":8}}]},"3":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":55,"column":12}},{"start":{"line":55,"column":12},"end":{"line":55,"column":12}}]},"4":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":8},"end":{"line":84,"column":8}},{"start":{"line":84,"column":8},"end":{"line":84,"column":8}}]},"5":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":12},"end":{"line":98,"column":12}},{"start":{"line":98,"column":12},"end":{"line":98,"column":12}}]},"6":{"line":136,"type":"if","locations":[{"start":{"line":136,"column":12},"end":{"line":136,"column":12}},{"start":{"line":136,"column":12},"end":{"line":136,"column":12}}]},"7":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":12},"end":{"line":145,"column":12}},{"start":{"line":145,"column":12},"end":{"line":145,"column":12}}]},"8":{"line":163,"type":"if","locations":[{"start":{"line":163,"column":8},"end":{"line":163,"column":8}},{"start":{"line":163,"column":8},"end":{"line":163,"column":8}}]},"9":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":8},"end":{"line":174,"column":8}},{"start":{"line":174,"column":8},"end":{"line":174,"column":8}}]},"10":{"line":184,"type":"if","locations":[{"start":{"line":184,"column":8},"end":{"line":184,"column":8}},{"start":{"line":184,"column":8},"end":{"line":184,"column":8}}]},"11":{"line":192,"type":"if","locations":[{"start":{"line":192,"column":8},"end":{"line":192,"column":8}},{"start":{"line":192,"column":8},"end":{"line":192,"column":8}}]},"12":{"line":192,"type":"binary-expr","locations":[{"start":{"line":192,"column":12},"end":{"line":192,"column":26}},{"start":{"line":192,"column":30},"end":{"line":192,"column":49}}]},"13":{"line":225,"type":"if","locations":[{"start":{"line":225,"column":24},"end":{"line":225,"column":24}},{"start":{"line":225,"column":24},"end":{"line":225,"column":24}}]},"14":{"line":235,"type":"if","locations":[{"start":{"line":235,"column":20},"end":{"line":235,"column":20}},{"start":{"line":235,"column":20},"end":{"line":235,"column":20}}]},"15":{"line":247,"type":"if","locations":[{"start":{"line":247,"column":20},"end":{"line":247,"column":20}},{"start":{"line":247,"column":20},"end":{"line":247,"column":20}}]},"16":{"line":249,"type":"if","locations":[{"start":{"line":249,"column":24},"end":{"line":249,"column":24}},{"start":{"line":249,"column":24},"end":{"line":249,"column":24}}]},"17":{"line":263,"type":"if","locations":[{"start":{"line":263,"column":8},"end":{"line":263,"column":8}},{"start":{"line":263,"column":8},"end":{"line":263,"column":8}}]},"18":{"line":267,"type":"if","locations":[{"start":{"line":267,"column":8},"end":{"line":267,"column":8}},{"start":{"line":267,"column":8},"end":{"line":267,"column":8}}]},"19":{"line":267,"type":"binary-expr","locations":[{"start":{"line":267,"column":12},"end":{"line":267,"column":26}},{"start":{"line":267,"column":30},"end":{"line":267,"column":44}}]},"20":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":12},"end":{"line":269,"column":12}},{"start":{"line":269,"column":12},"end":{"line":269,"column":12}}]},"21":{"line":277,"type":"if","locations":[{"start":{"line":277,"column":8},"end":{"line":277,"column":8}},{"start":{"line":277,"column":8},"end":{"line":277,"column":8}}]},"22":{"line":300,"type":"if","locations":[{"start":{"line":300,"column":20},"end":{"line":300,"column":20}},{"start":{"line":300,"column":20},"end":{"line":300,"column":20}}]},"23":{"line":308,"type":"if","locations":[{"start":{"line":308,"column":20},"end":{"line":308,"column":20}},{"start":{"line":308,"column":20},"end":{"line":308,"column":20}}]},"24":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":24},"end":{"line":310,"column":24}},{"start":{"line":310,"column":24},"end":{"line":310,"column":24}}]},"25":{"line":349,"type":"if","locations":[{"start":{"line":349,"column":8},"end":{"line":349,"column":8}},{"start":{"line":349,"column":8},"end":{"line":349,"column":8}}]},"26":{"line":349,"type":"binary-expr","locations":[{"start":{"line":349,"column":12},"end":{"line":349,"column":35}},{"start":{"line":349,"column":39},"end":{"line":349,"column":57}}]},"27":{"line":351,"type":"if","locations":[{"start":{"line":351,"column":15},"end":{"line":351,"column":15}},{"start":{"line":351,"column":15},"end":{"line":351,"column":15}}]},"28":{"line":351,"type":"binary-expr","locations":[{"start":{"line":351,"column":19},"end":{"line":351,"column":30}},{"start":{"line":351,"column":34},"end":{"line":351,"column":63}}]},"29":{"line":352,"type":"if","locations":[{"start":{"line":352,"column":12},"end":{"line":352,"column":12}},{"start":{"line":352,"column":12},"end":{"line":352,"column":12}}]},"30":{"line":355,"type":"if","locations":[{"start":{"line":355,"column":15},"end":{"line":355,"column":15}},{"start":{"line":355,"column":15},"end":{"line":355,"column":15}}]},"31":{"line":355,"type":"binary-expr","locations":[{"start":{"line":355,"column":19},"end":{"line":355,"column":30}},{"start":{"line":355,"column":34},"end":{"line":355,"column":64}}]},"32":{"line":356,"type":"if","locations":[{"start":{"line":356,"column":12},"end":{"line":356,"column":12}},{"start":{"line":356,"column":12},"end":{"line":356,"column":12}}]},"33":{"line":367,"type":"if","locations":[{"start":{"line":367,"column":8},"end":{"line":367,"column":8}},{"start":{"line":367,"column":8},"end":{"line":367,"column":8}}]},"34":{"line":367,"type":"binary-expr","locations":[{"start":{"line":367,"column":12},"end":{"line":367,"column":64}},{"start":{"line":367,"column":68},"end":{"line":367,"column":125}}]},"35":{"line":369,"type":"if","locations":[{"start":{"line":369,"column":12},"end":{"line":369,"column":12}},{"start":{"line":369,"column":12},"end":{"line":369,"column":12}}]},"36":{"line":376,"type":"if","locations":[{"start":{"line":376,"column":15},"end":{"line":376,"column":15}},{"start":{"line":376,"column":15},"end":{"line":376,"column":15}}]},"37":{"line":379,"type":"if","locations":[{"start":{"line":379,"column":15},"end":{"line":379,"column":15}},{"start":{"line":379,"column":15},"end":{"line":379,"column":15}}]},"38":{"line":392,"type":"if","locations":[{"start":{"line":392,"column":8},"end":{"line":392,"column":8}},{"start":{"line":392,"column":8},"end":{"line":392,"column":8}}]},"39":{"line":392,"type":"binary-expr","locations":[{"start":{"line":392,"column":12},"end":{"line":392,"column":28}},{"start":{"line":392,"column":32},"end":{"line":392,"column":50}}]},"40":{"line":393,"type":"if","locations":[{"start":{"line":393,"column":12},"end":{"line":393,"column":12}},{"start":{"line":393,"column":12},"end":{"line":393,"column":12}}]},"41":{"line":412,"type":"if","locations":[{"start":{"line":412,"column":8},"end":{"line":412,"column":8}},{"start":{"line":412,"column":8},"end":{"line":412,"column":8}}]},"42":{"line":413,"type":"if","locations":[{"start":{"line":413,"column":12},"end":{"line":413,"column":12}},{"start":{"line":413,"column":12},"end":{"line":413,"column":12}}]},"43":{"line":430,"type":"if","locations":[{"start":{"line":430,"column":8},"end":{"line":430,"column":8}},{"start":{"line":430,"column":8},"end":{"line":430,"column":8}}]},"44":{"line":448,"type":"if","locations":[{"start":{"line":448,"column":12},"end":{"line":448,"column":12}},{"start":{"line":448,"column":12},"end":{"line":448,"column":12}}]},"45":{"line":453,"type":"if","locations":[{"start":{"line":453,"column":8},"end":{"line":453,"column":8}},{"start":{"line":453,"column":8},"end":{"line":453,"column":8}}]},"46":{"line":463,"type":"if","locations":[{"start":{"line":463,"column":8},"end":{"line":463,"column":8}},{"start":{"line":463,"column":8},"end":{"line":463,"column":8}}]},"47":{"line":467,"type":"if","locations":[{"start":{"line":467,"column":8},"end":{"line":467,"column":8}},{"start":{"line":467,"column":8},"end":{"line":467,"column":8}}]},"48":{"line":474,"type":"if","locations":[{"start":{"line":474,"column":8},"end":{"line":474,"column":8}},{"start":{"line":474,"column":8},"end":{"line":474,"column":8}}]},"49":{"line":485,"type":"if","locations":[{"start":{"line":485,"column":8},"end":{"line":485,"column":8}},{"start":{"line":485,"column":8},"end":{"line":485,"column":8}}]},"50":{"line":488,"type":"if","locations":[{"start":{"line":488,"column":12},"end":{"line":488,"column":12}},{"start":{"line":488,"column":12},"end":{"line":488,"column":12}}]},"51":{"line":493,"type":"if","locations":[{"start":{"line":493,"column":12},"end":{"line":493,"column":12}},{"start":{"line":493,"column":12},"end":{"line":493,"column":12}}]},"52":{"line":538,"type":"binary-expr","locations":[{"start":{"line":538,"column":21},"end":{"line":538,"column":39}},{"start":{"line":538,"column":43},"end":{"line":538,"column":45}}]}},"code":["(function () { YUI.add('moodle-mod_mediagallery-mediabox', function (Y, NAME) {","","var MEDIABOX = function() {","    MEDIABOX.superclass.constructor.apply(this, arguments);","};","","Y.extend(MEDIABOX, Y.Base, {","    initializer : function(config) {","        this.enable();","        this.build();","        this._sidebarwidth = 300;","        this._navbarheight = 60;","        this.currentitem = null;","        this._audiowidth = 250;","        this._audioheight = 275;","        this._videowidth = 640;","        this._videoheight = 390;","        this._fullscreenavail = screenfull.enabled && !Y.one('body').hasClass('ui-mobile-viewport');","    },","","    build : function() {","        var _this = this;","        var strnext = M.str.moodle.next;","        var strprev = M.str.moodle.previous;","        var strviewfull = M.str.mod_mediagallery.viewfullsize;","        var strtoggle = M.str.mod_mediagallery.togglesidebar;","        var strfullscreen = M.str.mod_mediagallery.togglefullscreen;","        var strclose = M.str.mod_mediagallery.close;","        var actions = '<img class=\"sidebartoggle\" src=\"'+M.util.image_url('toggle', 'mod_mediagallery')+'\" title=\"'+strtoggle+'\" alt=\"'+strtoggle+'\"/>';","        actions += '<img class=\"prev\" src=\"'+M.util.image_url('left', 'mod_mediagallery')+'\" title=\"'+strprev+'\" alt=\"'+strprev+'\"/>';","        actions += '<img class=\"next\" src=\"'+M.util.image_url('right', 'mod_mediagallery')+'\" title=\"'+strnext+'\" alt=\"'+strnext+'\"/>';","        actions += '<img class=\"open\" src=\"'+M.util.image_url('download', 'mod_mediagallery')+'\" title=\"'+strviewfull+'\" alt=\"'+strviewfull+'\"/>';","        if (this._fullscreenavail) {","            actions += '<img class=\"fullscreen\" src=\"'+M.util.image_url('fullscreen', 'mod_mediagallery')+'\" title=\"'+strfullscreen+'\" alt=\"'+strfullscreen+'\"/>';","        }","        actions += '<img class=\"mbclose\" src=\"'+M.util.image_url('close', 'mod_mediagallery')+'\" title=\"'+strclose+'\" alt=\"'+strclose+'\"/>';","","        var template = '<div id=\"mediabox\"><div id=\"mediabox-content-wrap\"><div id=\"mediabox-content\"></div></div>';","        template += '<div id=\"mediabox-sidebar\"><div id=\"mediabox-sidebar-actions\">'+actions+'</div>';","        template += '<div id=\"mediabox-metainfo\"></div><hr/><div id=\"mediabox-social\"></div><hr/><div id=\"mediabox-comments\"></div>';","        template += '</div><div id=\"mediabox-navbar\"><div id=\"mediabox-navbar-container\"></div></div></div><div id=\"mediabox-overlay\"></div>';","        Y.Node.create(template).appendTo('body');","        this.overlay = Y.one('#mediabox-overlay');","        this.mediabox = Y.one('#mediabox');","        this.navbar = Y.one('#mediabox-navbar');","        this.resizeoverlay();","","        this.album = Y.all('a[rel^=mediabox], area[rel^=mediabox], a[data-mediabox], area[data-mediabox]').getDOMNodes();","","        this.overlay.on('click', function() {","            _this.stop();","        });","","        Y.delegate('click', function(e) {","            if (e.currentTarget.get('id') === 'mediabox-navbar-container') {","                return false;","            }","            _this.stop();","        }, '#mediabox', '#mediabox-navbar, #mediabox-navbar-container');","","        // Sidebar hide/expand button.","        var sidebar = Y.one('#mediabox-sidebar');","        Y.one('#mediabox-sidebar-actions .sidebartoggle').on('click', function() {","            _this.mediabox.toggleClass('sidebarhidden');","            _this.resizeoverlay();","            _this.repositionitem();","        });","","        for (var i = 0; i < this.album.length; i++) {","            var navitem = Y.Node.create('<div class=\"navitem\"></div>');","            navitem.setAttribute('data-id', i);","            var item = Y.Node.create('<img/>');","            item.setAttribute('src', this.album[i].children[0].getAttribute('src'));","            item.appendTo(navitem);","","            navitem.appendTo('#mediabox-navbar-container');","        }","        Y.delegate('click', function(e) {","            e.preventDefault();","            _this.changeitem(e.currentTarget.getAttribute('data-id'));","        }, '#mediabox-navbar', '.navitem');","","        // Like button and text.","        if (this.get('enablelikes')) {","            Y.Node.create(","                '<a class=\"like\" href=\"#\"><div class=\"like\"></div>'+M.str.mod_mediagallery.like+'</a><span id=\"mediabox-likedby\"></span>'","            ).appendTo('#mediabox-social');","        }","","        // Like action.","        Y.delegate('click', function(e) {","            e.preventDefault();","","            var action = 'like';","            var likedbyme = 1;","            var text = 'unlike';","            var icon = '<div class=\"unlike\"></div>';","            if (Y.one('#mediabox-social a.like div').hasClass('unlike')) {","                action = 'unlike';","                likedbyme = 0;","                text = 'like';","                icon = '<div class=\"like\"></div>';","            }","","            var data = _this.get('metainfodata');","            data.id = _this.album[_this.currentitemindex].getAttribute(_this.get('dataidfield'));","            data.action = action;","","            var config = {","                method: 'POST',","                data: data,","                on: {","                    success : function (id, response) {","                        var resp = JSON.parse(response.responseText);","                        _this.update_likes(resp.likes, likedbyme);","                    }","                },","                context: this,","                sync: true","            };","","            Y.io(_this.get('metainfouri'), config);","            Y.one('#mediabox-social a.like').setHTML(icon + M.str.mod_mediagallery[text]);","","        }, '#mediabox', '#mediabox-social a.like');","","        Y.delegate('blur', function(e) {","            _this.enablenav();","        }, '#mediabox', '#mediabox-comments textarea');","","        Y.delegate('focus', function(e) {","            _this.disablenav();","        }, '#mediabox', '#mediabox-comments textarea');","","        Y.one('#mediabox-sidebar-actions .prev').on('click', function() {","            if (_this.currentitemindex === 0) {","                _this.changeitem(_this.album.length - 1);","            } else {","                _this.changeitem(_this.currentitemindex - 1);","            }","            return false;","        });","","        Y.one('#mediabox-sidebar-actions .next').on('click', function() {","            if (_this.currentitemindex === _this.album.length - 1) {","                _this.changeitem(0);","            } else {","                _this.changeitem(_this.currentitemindex + 1);","            }","            return false;","        });","","        Y.one('#mediabox-sidebar-actions .open').on('click', function() {","            window.open(_this.album[_this.currentitemindex].getAttribute('data-url'), '_blank');","            return false;","        });","","        Y.one('#mediabox-sidebar-actions .mbclose').on('click', function() {","            _this.stop();","            return false;","        });","","        if (this._fullscreenavail) {","            Y.one('#mediabox-sidebar-actions .fullscreen').on('click', function() {","                screenfull.toggle(_this.mediabox.getDOMNode());","                _this.setfullscreenimg();","                return false;","            });","        }","","    },","","    changeitem : function(itemnumber) {","        if (this.currentitemindex === itemnumber) {","            return;","        }","        var _this = this;","        var content = Y.one('#mediabox-content');","        var player = this.album[itemnumber].getAttribute('data-player');","        var type = this.album[itemnumber].getAttribute('data-type');","        content.empty();","","        var current = null;","        if (current = this.navbar.one('.navitem.current')) {","            current.removeClass('current');","        }","        this.navbar.one('.navitem[data-id=\"'+itemnumber+'\"]').addClass('current');","","        var image = new Image();","","        // Player type 2 is for videos. We don't need images for those.","        if (player !== \"2\" && type !== 'external') {","            image.onload = function() {","                var item = Y.Node.create('<img/>');","                item.setAttribute('src', _this.album[itemnumber].getAttribute('href'));","                content.all('img').remove();","                content.prepend(item);","                _this.repositionitem(image.width, image.height);","            };","            image.src = this.album[itemnumber].getAttribute('href');","        }","","        this.currentitemindex = parseInt(itemnumber);","        this.currentitem = this.album[itemnumber];","","        var metainfo = Y.one('#mediabox-metainfo');","        metainfo.empty();","","        var data = this.get('metainfodata');","        data.id = this.currentitem.getAttribute(this.get('dataidfield'));","        data.action = 'metainfo';","","        var config = {","            method: 'GET',","            data: data,","            on: {","                success : function (id, response) {","                    var resp;","                    try {","                        resp = JSON.parse(response.responseText);","                    } catch (e) {","                        return;","                    }","                    for (var i = 0; i < resp.fields.length; i++) {","                        if (resp.fields[i].value === '') {","                            continue;","                        }","                        Y.Node.create('<div class=\"metafield '+resp.fields[i].name+'\"></div>').append(","                            '<div class=\"metaname\">'+resp.fields[i].displayname+'</div>'","                        ).append(","                            '<div class=\"metavalue\">'+resp.fields[i].value+'</div>'","                        ).appendTo(metainfo);","                    }","","                    if (resp.commentcontrol) {","                        Y.one('#mediabox-comments').setHTML(resp.commentcontrol);","                        var opts = {","                            client_id : resp.client_id,","                            contextid : resp.contextid,","                            itemid : this.album[itemnumber].getAttribute(this.get('dataidfield')),","                            component : 'mod_mediagallery',","                            commentarea : 'item',","                            autostart : true","                        };","                        M.core_comment.init(Y, opts);","                    }","                    if (_this.get('enablelikes')) {","                        var icon = '<div class=\"like\"></div>';","                        if (resp.likedbyme) {","                            icon = '<div class=\"unlike\"></div>';","                            Y.one('#mediabox-social a.like').setHTML(icon + M.str.mod_mediagallery.unlike);","                        } else {","                            Y.one('#mediabox-social a.like').setHTML(icon + M.str.mod_mediagallery.like);","                        }","","                        this.update_likes(resp.likes, resp.likedbyme);","                    }","                }","            },","            context: this,","            sync: true","        };","        if (this.get('metainfouri') !== '') {","            Y.io(this.get('metainfouri'), config);","        }","","        if (player === \"0\" || player === \"2\") {","            this.embed_player(data.id);","            if (player === \"0\") {","                content.one('span.mediaplugin').addClass('audio');","            } else {","                content.one('span.mediaplugin').addClass('video');","            }","        }","","        // YouTube embed.","        if (this.currentitem.getAttribute('data-type') === 'external') {","            content.empty();","","            Y.Node.create('<iframe id=\"mediabox-youtube\" type=\"text/html\" width=\"'+this._videowidth+'\" height=\"'+this._videoheight+'\" src=\"'+this.currentitem.getAttribute('data-url') +'\" frameborder=\"0\">').appendTo(content);","            this.repositionitem();","        }","","    },","","    disablenav : function() {","        this.keyboardnav.detach();","    },","","    embed_player : function(id) {","        var data = this.get('metainfodata');","        data.id = id;","        data.action = 'embed';","        var config = {","            method: 'GET',","            data: data,","            on: {","                success : function (id, response) {","                    var resp = JSON.parse(response.responseText);","                    if (resp.type === 'audio') {","                        Y.one('#mediabox-content').append(resp.html);","                        M.util.add_audio_player(resp.id, resp.url, false);","                    } else {","                        Y.one('#mediabox-content').setHTML(resp.html);","                        M.util.add_video_player(resp.id, resp.url, false);","                    }","                    M.mod_mediagallery.base.load_flowplayer();","                    if (resp.type === 'video') {","                        var plugin = Y.one('#mediabox-content .mediaplugin');","                        if (resp.flow) {","                            plugin.addClass('flow');","                            this.repositionitem(this._videowidth, this._videoheight);","                        } else {","                            this.repositionitem(plugin.get('offsetWidth'), plugin.get('offsetHeight'));","                        }","                    }","                }","            },","            context: this,","            sync: true","        };","","        Y.io(this.get('metainfouri'), config);","    },","","    enable : function() {","        var _this = this;","        return Y.one('body').all('a[rel^=mediabox], area[rel^=mediabox], a[data-mediabox], area[data-mediabox]').on('click', function(e) {","            e.preventDefault();","            _this.start(Y.one(e.currentTarget));","            return false;","        });","    },","","    enablenav : function() {","        var _this = this;","        this.keyboardnav = Y.one(document).on('keyup', function(e) {","            _this.keyboardaction(e);","        });","    },","","    keyboardaction : function(e) {","        var KEYCODE_ESC, KEYCODE_LEFTARROW, KEYCODE_RIGHTARROW, key, keycode;","        KEYCODE_ESC = 27;","        KEYCODE_LEFTARROW = 37;","        KEYCODE_RIGHTARROW = 39;","        keycode = event.keyCode;","        key = String.fromCharCode(keycode).toLowerCase();","        if (keycode === KEYCODE_ESC || key.match(/x|o|c/)) {","            this.stop();","        } else if (key === 'p' || keycode === KEYCODE_LEFTARROW) {","            if (this.currentitemindex !== 0) {","                this.changeitem(this.currentitemindex - 1);","            }","        } else if (key === 'n' || keycode === KEYCODE_RIGHTARROW) {","            if (this.currentitemindex !== this.album.length - 1) {","                this.changeitem(this.currentitemindex + 1);","            }","        }","    },","","    repositionitem : function(width, height) {","        var offsetTop, offsetLeft, newwidth, newheight;","        var content = Y.one('#mediabox-content');","        var innercontent = content.get('children').get(0)[0];","","        if (this.currentitem.getAttribute('data-player') === \"2\" || this.currentitem.getAttribute('data-type') === 'external') {","            // Flowplayer gets special treatment.","            if (content.one('.mediaplugin.flow')) {","                width = this._videowidth;","                height = this._videoheight;","            } else {","                width = innercontent.get('offsetWidth');","                height = innercontent.get('offsetHeight');","            }","        } else if (this.currentitem.getAttribute('data-player') === \"0\") {","            width = this._audiowidth;","            height = this._audioheight;","        } else if (width === undefined) {","            width = innercontent.get('naturalWidth');","            height = innercontent.get('naturalHeight');","        }","","        var winwidth = Y.one('body').get('winWidth');","        var winheight = Y.one('body').get('winHeight');","","        var maxwidth = winwidth - this.sidebarwidth();","        var maxheight = winheight - this._navbarheight;","","        var newwidth = '';","        var newheight = '';","        if (width > maxwidth || height > maxheight) {","            if ((width / maxwidth) > (height / maxheight)) {","                newwidth = maxwidth;","                newheight = parseInt(height / (width / maxwidth), 10);","                offsetLeft = 0;","                offsetTop = (winheight - newheight) / 2;","            } else {","                newheight = maxheight;","                newwidth = parseInt(width / (height / maxheight), 10);","                offsetTop = 0;","                offsetLeft = (winwidth - newwidth - this.sidebarwidth()) / 2;","            }","            newwidth += 'px';","            newheight += 'px';","        } else {","            offsetLeft = (winwidth - width - this.sidebarwidth()) / 2;","            offsetTop = (winheight - height - this._navbarheight) / 2;","        }","        innercontent.setStyle('width', newwidth);","        innercontent.setStyle('height', newheight);","        if (this.currentitem.getAttribute('data-player') === \"0\") {","            if (content.one('.mediaplugin object')) {","                content.one('.mediaplugin object').setStyle('width', newwidth);","            }","        }","","        content.setStyle('top', offsetTop + 'px');","        content.setStyle('left', offsetLeft + 'px');","    },","","    resizeoverlay : function () {","        var viewportwidth = Y.one(\"body\").get(\"docWidth\");","        var viewportheight = Y.one(\"body\").get(\"docHeight\");","        this.overlay.setStyle('width', viewportwidth);","        this.overlay.setStyle('height', viewportheight);","    },","","    sidebarwidth : function() {","        if (this.mediabox.hasClass('sidebarhidden')) {","            return 0;","        }","        return this._sidebarwidth;","    },","","    start : function(target) {","        var _this = this;","        Y.on('windowresize', function() {","            _this.resizeoverlay();","            _this.repositionitem();","        });","        Y.one('body').addClass('noscroll mediaboxactive');","        this.overlay.setStyle('display', 'block');","        this.mediabox.setStyle('display', 'block');","","        var itemnumber = 0;","        for (var i = 0; i < this.album.length; i++) {","            if (this.album[i].getAttribute('href') === target.getAttribute('href')) {","                itemnumber = i;","            }","        }","","        if (this.currentitemindex !== itemnumber) {","            Y.one('#mediabox-content').empty();","        }","","        this.setfullscreenimg();","        this.changeitem(itemnumber);","        this.enablenav();","    },","","    setfullscreenimg : function() {","        if (!Y.one('#mediabox-sidebar-actions .fullscreen')) {","            return;","        }","        var imgurl = M.util.image_url('fullscreen', 'mod_mediagallery');","        if (screenfull.isFullscreen) {","            imgurl = M.util.image_url('fullscreenexit', 'mod_mediagallery');","        }","        Y.one('#mediabox-sidebar-actions .fullscreen').setAttribute('src', imgurl);","    },","","    stop : function() {","        if (screenfull.isFullscreen) {","            screenfull.exit();","        }","        this.disablenav();","        Y.one('body').removeClass('noscroll mediaboxactive');","        this.overlay.setStyle('display', '');","        this.mediabox.setStyle('display', '');","    },","","    update_likes : function(likes, likedbyme) {","        var str = '';","        if (likes > 0) {","            str = '&nbsp;&bull;&nbsp;';","            str += M.str.mod_mediagallery.likedby+': ';","            if (likedbyme) {","                likes = likes - 1;","                str += M.str.mod_mediagallery.you + ', ';","            }","            str += likes+' ';","            if (likes !== 1) {","                str += M.str.mod_mediagallery.others;","            } else {","                str += M.str.mod_mediagallery.other;","            }","        }","        Y.one('#mediabox-likedby').setHTML(str);","    }","","}, {","    NAME : 'moodle-mod_mediagallery-mediabox',","    ATTRS : {","        enablecomments: {","            value : true,","            validator: function(val) {","                return Y.Lang.isBoolean(val);","            }","        },","        enablelikes: {","            value : true,","            validator: function(val) {","                return Y.Lang.isBoolean(val);","            }","        },","        metainfouri: {","            value : '',","            validator: function(val) {","                return Y.Lang.isString(val);","            }","        },","        dataidfield: {","            value : 'data-id',","            validator: function(val) {","                return Y.Lang.isString(val);","            }","        },","        metainfodata: {","            value: {},","            validator: function(val) {","                return Y.Lang.isObject(val);","            }","        }","    }","});","","M.mod_mediagallery = M.mod_mediagallery || {};","M.mod_mediagallery.init_mediabox = function(params) {","    return new MEDIABOX(params);","};","","","}, '@VERSION@', {\"requires\": [\"base\", \"node\", \"selector-css3\"]});","","}());"]};
}
var __cov_FKaCM57dBYRr4Gpg473z2g = __coverage__['build/moodle-mod_mediagallery-mediabox/moodle-mod_mediagallery-mediabox.js'];
__cov_FKaCM57dBYRr4Gpg473z2g.s['1']++;YUI.add('moodle-mod_mediagallery-mediabox',function(Y,NAME){__cov_FKaCM57dBYRr4Gpg473z2g.f['1']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['2']++;var MEDIABOX=function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['2']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['3']++;MEDIABOX.superclass.constructor.apply(this,arguments);};__cov_FKaCM57dBYRr4Gpg473z2g.s['4']++;Y.extend(MEDIABOX,Y.Base,{initializer:function(config){__cov_FKaCM57dBYRr4Gpg473z2g.f['3']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['5']++;this.enable();__cov_FKaCM57dBYRr4Gpg473z2g.s['6']++;this.build();__cov_FKaCM57dBYRr4Gpg473z2g.s['7']++;this._sidebarwidth=300;__cov_FKaCM57dBYRr4Gpg473z2g.s['8']++;this._navbarheight=60;__cov_FKaCM57dBYRr4Gpg473z2g.s['9']++;this.currentitem=null;__cov_FKaCM57dBYRr4Gpg473z2g.s['10']++;this._audiowidth=250;__cov_FKaCM57dBYRr4Gpg473z2g.s['11']++;this._audioheight=275;__cov_FKaCM57dBYRr4Gpg473z2g.s['12']++;this._videowidth=640;__cov_FKaCM57dBYRr4Gpg473z2g.s['13']++;this._videoheight=390;__cov_FKaCM57dBYRr4Gpg473z2g.s['14']++;this._fullscreenavail=(__cov_FKaCM57dBYRr4Gpg473z2g.b['1'][0]++,screenfull.enabled)&&(__cov_FKaCM57dBYRr4Gpg473z2g.b['1'][1]++,!Y.one('body').hasClass('ui-mobile-viewport'));},build:function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['4']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['15']++;var _this=this;__cov_FKaCM57dBYRr4Gpg473z2g.s['16']++;var strnext=M.str.moodle.next;__cov_FKaCM57dBYRr4Gpg473z2g.s['17']++;var strprev=M.str.moodle.previous;__cov_FKaCM57dBYRr4Gpg473z2g.s['18']++;var strviewfull=M.str.mod_mediagallery.viewfullsize;__cov_FKaCM57dBYRr4Gpg473z2g.s['19']++;var strtoggle=M.str.mod_mediagallery.togglesidebar;__cov_FKaCM57dBYRr4Gpg473z2g.s['20']++;var strfullscreen=M.str.mod_mediagallery.togglefullscreen;__cov_FKaCM57dBYRr4Gpg473z2g.s['21']++;var strclose=M.str.mod_mediagallery.close;__cov_FKaCM57dBYRr4Gpg473z2g.s['22']++;var actions='<img class="sidebartoggle" src="'+M.util.image_url('toggle','mod_mediagallery')+'" title="'+strtoggle+'" alt="'+strtoggle+'"/>';__cov_FKaCM57dBYRr4Gpg473z2g.s['23']++;actions+='<img class="prev" src="'+M.util.image_url('left','mod_mediagallery')+'" title="'+strprev+'" alt="'+strprev+'"/>';__cov_FKaCM57dBYRr4Gpg473z2g.s['24']++;actions+='<img class="next" src="'+M.util.image_url('right','mod_mediagallery')+'" title="'+strnext+'" alt="'+strnext+'"/>';__cov_FKaCM57dBYRr4Gpg473z2g.s['25']++;actions+='<img class="open" src="'+M.util.image_url('download','mod_mediagallery')+'" title="'+strviewfull+'" alt="'+strviewfull+'"/>';__cov_FKaCM57dBYRr4Gpg473z2g.s['26']++;if(this._fullscreenavail){__cov_FKaCM57dBYRr4Gpg473z2g.b['2'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['27']++;actions+='<img class="fullscreen" src="'+M.util.image_url('fullscreen','mod_mediagallery')+'" title="'+strfullscreen+'" alt="'+strfullscreen+'"/>';}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['2'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['28']++;actions+='<img class="mbclose" src="'+M.util.image_url('close','mod_mediagallery')+'" title="'+strclose+'" alt="'+strclose+'"/>';__cov_FKaCM57dBYRr4Gpg473z2g.s['29']++;var template='<div id="mediabox"><div id="mediabox-content-wrap"><div id="mediabox-content"></div></div>';__cov_FKaCM57dBYRr4Gpg473z2g.s['30']++;template+='<div id="mediabox-sidebar"><div id="mediabox-sidebar-actions">'+actions+'</div>';__cov_FKaCM57dBYRr4Gpg473z2g.s['31']++;template+='<div id="mediabox-metainfo"></div><hr/><div id="mediabox-social"></div><hr/><div id="mediabox-comments"></div>';__cov_FKaCM57dBYRr4Gpg473z2g.s['32']++;template+='</div><div id="mediabox-navbar"><div id="mediabox-navbar-container"></div></div></div><div id="mediabox-overlay"></div>';__cov_FKaCM57dBYRr4Gpg473z2g.s['33']++;Y.Node.create(template).appendTo('body');__cov_FKaCM57dBYRr4Gpg473z2g.s['34']++;this.overlay=Y.one('#mediabox-overlay');__cov_FKaCM57dBYRr4Gpg473z2g.s['35']++;this.mediabox=Y.one('#mediabox');__cov_FKaCM57dBYRr4Gpg473z2g.s['36']++;this.navbar=Y.one('#mediabox-navbar');__cov_FKaCM57dBYRr4Gpg473z2g.s['37']++;this.resizeoverlay();__cov_FKaCM57dBYRr4Gpg473z2g.s['38']++;this.album=Y.all('a[rel^=mediabox], area[rel^=mediabox], a[data-mediabox], area[data-mediabox]').getDOMNodes();__cov_FKaCM57dBYRr4Gpg473z2g.s['39']++;this.overlay.on('click',function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['5']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['40']++;_this.stop();});__cov_FKaCM57dBYRr4Gpg473z2g.s['41']++;Y.delegate('click',function(e){__cov_FKaCM57dBYRr4Gpg473z2g.f['6']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['42']++;if(e.currentTarget.get('id')==='mediabox-navbar-container'){__cov_FKaCM57dBYRr4Gpg473z2g.b['3'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['43']++;return false;}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['3'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['44']++;_this.stop();},'#mediabox','#mediabox-navbar, #mediabox-navbar-container');__cov_FKaCM57dBYRr4Gpg473z2g.s['45']++;var sidebar=Y.one('#mediabox-sidebar');__cov_FKaCM57dBYRr4Gpg473z2g.s['46']++;Y.one('#mediabox-sidebar-actions .sidebartoggle').on('click',function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['7']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['47']++;_this.mediabox.toggleClass('sidebarhidden');__cov_FKaCM57dBYRr4Gpg473z2g.s['48']++;_this.resizeoverlay();__cov_FKaCM57dBYRr4Gpg473z2g.s['49']++;_this.repositionitem();});__cov_FKaCM57dBYRr4Gpg473z2g.s['50']++;for(var i=0;i<this.album.length;i++){__cov_FKaCM57dBYRr4Gpg473z2g.s['51']++;var navitem=Y.Node.create('<div class="navitem"></div>');__cov_FKaCM57dBYRr4Gpg473z2g.s['52']++;navitem.setAttribute('data-id',i);__cov_FKaCM57dBYRr4Gpg473z2g.s['53']++;var item=Y.Node.create('<img/>');__cov_FKaCM57dBYRr4Gpg473z2g.s['54']++;item.setAttribute('src',this.album[i].children[0].getAttribute('src'));__cov_FKaCM57dBYRr4Gpg473z2g.s['55']++;item.appendTo(navitem);__cov_FKaCM57dBYRr4Gpg473z2g.s['56']++;navitem.appendTo('#mediabox-navbar-container');}__cov_FKaCM57dBYRr4Gpg473z2g.s['57']++;Y.delegate('click',function(e){__cov_FKaCM57dBYRr4Gpg473z2g.f['8']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['58']++;e.preventDefault();__cov_FKaCM57dBYRr4Gpg473z2g.s['59']++;_this.changeitem(e.currentTarget.getAttribute('data-id'));},'#mediabox-navbar','.navitem');__cov_FKaCM57dBYRr4Gpg473z2g.s['60']++;if(this.get('enablelikes')){__cov_FKaCM57dBYRr4Gpg473z2g.b['4'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['61']++;Y.Node.create('<a class="like" href="#"><div class="like"></div>'+M.str.mod_mediagallery.like+'</a><span id="mediabox-likedby"></span>').appendTo('#mediabox-social');}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['4'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['62']++;Y.delegate('click',function(e){__cov_FKaCM57dBYRr4Gpg473z2g.f['9']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['63']++;e.preventDefault();__cov_FKaCM57dBYRr4Gpg473z2g.s['64']++;var action='like';__cov_FKaCM57dBYRr4Gpg473z2g.s['65']++;var likedbyme=1;__cov_FKaCM57dBYRr4Gpg473z2g.s['66']++;var text='unlike';__cov_FKaCM57dBYRr4Gpg473z2g.s['67']++;var icon='<div class="unlike"></div>';__cov_FKaCM57dBYRr4Gpg473z2g.s['68']++;if(Y.one('#mediabox-social a.like div').hasClass('unlike')){__cov_FKaCM57dBYRr4Gpg473z2g.b['5'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['69']++;action='unlike';__cov_FKaCM57dBYRr4Gpg473z2g.s['70']++;likedbyme=0;__cov_FKaCM57dBYRr4Gpg473z2g.s['71']++;text='like';__cov_FKaCM57dBYRr4Gpg473z2g.s['72']++;icon='<div class="like"></div>';}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['5'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['73']++;var data=_this.get('metainfodata');__cov_FKaCM57dBYRr4Gpg473z2g.s['74']++;data.id=_this.album[_this.currentitemindex].getAttribute(_this.get('dataidfield'));__cov_FKaCM57dBYRr4Gpg473z2g.s['75']++;data.action=action;__cov_FKaCM57dBYRr4Gpg473z2g.s['76']++;var config={method:'POST',data:data,on:{success:function(id,response){__cov_FKaCM57dBYRr4Gpg473z2g.f['10']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['77']++;var resp=JSON.parse(response.responseText);__cov_FKaCM57dBYRr4Gpg473z2g.s['78']++;_this.update_likes(resp.likes,likedbyme);}},context:this,sync:true};__cov_FKaCM57dBYRr4Gpg473z2g.s['79']++;Y.io(_this.get('metainfouri'),config);__cov_FKaCM57dBYRr4Gpg473z2g.s['80']++;Y.one('#mediabox-social a.like').setHTML(icon+M.str.mod_mediagallery[text]);},'#mediabox','#mediabox-social a.like');__cov_FKaCM57dBYRr4Gpg473z2g.s['81']++;Y.delegate('blur',function(e){__cov_FKaCM57dBYRr4Gpg473z2g.f['11']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['82']++;_this.enablenav();},'#mediabox','#mediabox-comments textarea');__cov_FKaCM57dBYRr4Gpg473z2g.s['83']++;Y.delegate('focus',function(e){__cov_FKaCM57dBYRr4Gpg473z2g.f['12']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['84']++;_this.disablenav();},'#mediabox','#mediabox-comments textarea');__cov_FKaCM57dBYRr4Gpg473z2g.s['85']++;Y.one('#mediabox-sidebar-actions .prev').on('click',function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['13']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['86']++;if(_this.currentitemindex===0){__cov_FKaCM57dBYRr4Gpg473z2g.b['6'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['87']++;_this.changeitem(_this.album.length-1);}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['6'][1]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['88']++;_this.changeitem(_this.currentitemindex-1);}__cov_FKaCM57dBYRr4Gpg473z2g.s['89']++;return false;});__cov_FKaCM57dBYRr4Gpg473z2g.s['90']++;Y.one('#mediabox-sidebar-actions .next').on('click',function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['14']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['91']++;if(_this.currentitemindex===_this.album.length-1){__cov_FKaCM57dBYRr4Gpg473z2g.b['7'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['92']++;_this.changeitem(0);}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['7'][1]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['93']++;_this.changeitem(_this.currentitemindex+1);}__cov_FKaCM57dBYRr4Gpg473z2g.s['94']++;return false;});__cov_FKaCM57dBYRr4Gpg473z2g.s['95']++;Y.one('#mediabox-sidebar-actions .open').on('click',function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['15']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['96']++;window.open(_this.album[_this.currentitemindex].getAttribute('data-url'),'_blank');__cov_FKaCM57dBYRr4Gpg473z2g.s['97']++;return false;});__cov_FKaCM57dBYRr4Gpg473z2g.s['98']++;Y.one('#mediabox-sidebar-actions .mbclose').on('click',function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['16']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['99']++;_this.stop();__cov_FKaCM57dBYRr4Gpg473z2g.s['100']++;return false;});__cov_FKaCM57dBYRr4Gpg473z2g.s['101']++;if(this._fullscreenavail){__cov_FKaCM57dBYRr4Gpg473z2g.b['8'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['102']++;Y.one('#mediabox-sidebar-actions .fullscreen').on('click',function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['17']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['103']++;screenfull.toggle(_this.mediabox.getDOMNode());__cov_FKaCM57dBYRr4Gpg473z2g.s['104']++;_this.setfullscreenimg();__cov_FKaCM57dBYRr4Gpg473z2g.s['105']++;return false;});}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['8'][1]++;}},changeitem:function(itemnumber){__cov_FKaCM57dBYRr4Gpg473z2g.f['18']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['106']++;if(this.currentitemindex===itemnumber){__cov_FKaCM57dBYRr4Gpg473z2g.b['9'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['107']++;return;}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['9'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['108']++;var _this=this;__cov_FKaCM57dBYRr4Gpg473z2g.s['109']++;var content=Y.one('#mediabox-content');__cov_FKaCM57dBYRr4Gpg473z2g.s['110']++;var player=this.album[itemnumber].getAttribute('data-player');__cov_FKaCM57dBYRr4Gpg473z2g.s['111']++;var type=this.album[itemnumber].getAttribute('data-type');__cov_FKaCM57dBYRr4Gpg473z2g.s['112']++;content.empty();__cov_FKaCM57dBYRr4Gpg473z2g.s['113']++;var current=null;__cov_FKaCM57dBYRr4Gpg473z2g.s['114']++;if(current=this.navbar.one('.navitem.current')){__cov_FKaCM57dBYRr4Gpg473z2g.b['10'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['115']++;current.removeClass('current');}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['10'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['116']++;this.navbar.one('.navitem[data-id="'+itemnumber+'"]').addClass('current');__cov_FKaCM57dBYRr4Gpg473z2g.s['117']++;var image=new Image();__cov_FKaCM57dBYRr4Gpg473z2g.s['118']++;if((__cov_FKaCM57dBYRr4Gpg473z2g.b['12'][0]++,player!=='2')&&(__cov_FKaCM57dBYRr4Gpg473z2g.b['12'][1]++,type!=='external')){__cov_FKaCM57dBYRr4Gpg473z2g.b['11'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['119']++;image.onload=function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['19']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['120']++;var item=Y.Node.create('<img/>');__cov_FKaCM57dBYRr4Gpg473z2g.s['121']++;item.setAttribute('src',_this.album[itemnumber].getAttribute('href'));__cov_FKaCM57dBYRr4Gpg473z2g.s['122']++;content.all('img').remove();__cov_FKaCM57dBYRr4Gpg473z2g.s['123']++;content.prepend(item);__cov_FKaCM57dBYRr4Gpg473z2g.s['124']++;_this.repositionitem(image.width,image.height);};__cov_FKaCM57dBYRr4Gpg473z2g.s['125']++;image.src=this.album[itemnumber].getAttribute('href');}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['11'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['126']++;this.currentitemindex=parseInt(itemnumber);__cov_FKaCM57dBYRr4Gpg473z2g.s['127']++;this.currentitem=this.album[itemnumber];__cov_FKaCM57dBYRr4Gpg473z2g.s['128']++;var metainfo=Y.one('#mediabox-metainfo');__cov_FKaCM57dBYRr4Gpg473z2g.s['129']++;metainfo.empty();__cov_FKaCM57dBYRr4Gpg473z2g.s['130']++;var data=this.get('metainfodata');__cov_FKaCM57dBYRr4Gpg473z2g.s['131']++;data.id=this.currentitem.getAttribute(this.get('dataidfield'));__cov_FKaCM57dBYRr4Gpg473z2g.s['132']++;data.action='metainfo';__cov_FKaCM57dBYRr4Gpg473z2g.s['133']++;var config={method:'GET',data:data,on:{success:function(id,response){__cov_FKaCM57dBYRr4Gpg473z2g.f['20']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['134']++;var resp;__cov_FKaCM57dBYRr4Gpg473z2g.s['135']++;try{__cov_FKaCM57dBYRr4Gpg473z2g.s['136']++;resp=JSON.parse(response.responseText);}catch(e){__cov_FKaCM57dBYRr4Gpg473z2g.s['137']++;return;}__cov_FKaCM57dBYRr4Gpg473z2g.s['138']++;for(var i=0;i<resp.fields.length;i++){__cov_FKaCM57dBYRr4Gpg473z2g.s['139']++;if(resp.fields[i].value===''){__cov_FKaCM57dBYRr4Gpg473z2g.b['13'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['140']++;continue;}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['13'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['141']++;Y.Node.create('<div class="metafield '+resp.fields[i].name+'"></div>').append('<div class="metaname">'+resp.fields[i].displayname+'</div>').append('<div class="metavalue">'+resp.fields[i].value+'</div>').appendTo(metainfo);}__cov_FKaCM57dBYRr4Gpg473z2g.s['142']++;if(resp.commentcontrol){__cov_FKaCM57dBYRr4Gpg473z2g.b['14'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['143']++;Y.one('#mediabox-comments').setHTML(resp.commentcontrol);__cov_FKaCM57dBYRr4Gpg473z2g.s['144']++;var opts={client_id:resp.client_id,contextid:resp.contextid,itemid:this.album[itemnumber].getAttribute(this.get('dataidfield')),component:'mod_mediagallery',commentarea:'item',autostart:true};__cov_FKaCM57dBYRr4Gpg473z2g.s['145']++;M.core_comment.init(Y,opts);}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['14'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['146']++;if(_this.get('enablelikes')){__cov_FKaCM57dBYRr4Gpg473z2g.b['15'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['147']++;var icon='<div class="like"></div>';__cov_FKaCM57dBYRr4Gpg473z2g.s['148']++;if(resp.likedbyme){__cov_FKaCM57dBYRr4Gpg473z2g.b['16'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['149']++;icon='<div class="unlike"></div>';__cov_FKaCM57dBYRr4Gpg473z2g.s['150']++;Y.one('#mediabox-social a.like').setHTML(icon+M.str.mod_mediagallery.unlike);}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['16'][1]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['151']++;Y.one('#mediabox-social a.like').setHTML(icon+M.str.mod_mediagallery.like);}__cov_FKaCM57dBYRr4Gpg473z2g.s['152']++;this.update_likes(resp.likes,resp.likedbyme);}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['15'][1]++;}}},context:this,sync:true};__cov_FKaCM57dBYRr4Gpg473z2g.s['153']++;if(this.get('metainfouri')!==''){__cov_FKaCM57dBYRr4Gpg473z2g.b['17'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['154']++;Y.io(this.get('metainfouri'),config);}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['17'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['155']++;if((__cov_FKaCM57dBYRr4Gpg473z2g.b['19'][0]++,player==='0')||(__cov_FKaCM57dBYRr4Gpg473z2g.b['19'][1]++,player==='2')){__cov_FKaCM57dBYRr4Gpg473z2g.b['18'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['156']++;this.embed_player(data.id);__cov_FKaCM57dBYRr4Gpg473z2g.s['157']++;if(player==='0'){__cov_FKaCM57dBYRr4Gpg473z2g.b['20'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['158']++;content.one('span.mediaplugin').addClass('audio');}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['20'][1]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['159']++;content.one('span.mediaplugin').addClass('video');}}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['18'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['160']++;if(this.currentitem.getAttribute('data-type')==='external'){__cov_FKaCM57dBYRr4Gpg473z2g.b['21'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['161']++;content.empty();__cov_FKaCM57dBYRr4Gpg473z2g.s['162']++;Y.Node.create('<iframe id="mediabox-youtube" type="text/html" width="'+this._videowidth+'" height="'+this._videoheight+'" src="'+this.currentitem.getAttribute('data-url')+'" frameborder="0">').appendTo(content);__cov_FKaCM57dBYRr4Gpg473z2g.s['163']++;this.repositionitem();}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['21'][1]++;}},disablenav:function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['21']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['164']++;this.keyboardnav.detach();},embed_player:function(id){__cov_FKaCM57dBYRr4Gpg473z2g.f['22']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['165']++;var data=this.get('metainfodata');__cov_FKaCM57dBYRr4Gpg473z2g.s['166']++;data.id=id;__cov_FKaCM57dBYRr4Gpg473z2g.s['167']++;data.action='embed';__cov_FKaCM57dBYRr4Gpg473z2g.s['168']++;var config={method:'GET',data:data,on:{success:function(id,response){__cov_FKaCM57dBYRr4Gpg473z2g.f['23']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['169']++;var resp=JSON.parse(response.responseText);__cov_FKaCM57dBYRr4Gpg473z2g.s['170']++;if(resp.type==='audio'){__cov_FKaCM57dBYRr4Gpg473z2g.b['22'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['171']++;Y.one('#mediabox-content').append(resp.html);__cov_FKaCM57dBYRr4Gpg473z2g.s['172']++;M.util.add_audio_player(resp.id,resp.url,false);}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['22'][1]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['173']++;Y.one('#mediabox-content').setHTML(resp.html);__cov_FKaCM57dBYRr4Gpg473z2g.s['174']++;M.util.add_video_player(resp.id,resp.url,false);}__cov_FKaCM57dBYRr4Gpg473z2g.s['175']++;M.mod_mediagallery.base.load_flowplayer();__cov_FKaCM57dBYRr4Gpg473z2g.s['176']++;if(resp.type==='video'){__cov_FKaCM57dBYRr4Gpg473z2g.b['23'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['177']++;var plugin=Y.one('#mediabox-content .mediaplugin');__cov_FKaCM57dBYRr4Gpg473z2g.s['178']++;if(resp.flow){__cov_FKaCM57dBYRr4Gpg473z2g.b['24'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['179']++;plugin.addClass('flow');__cov_FKaCM57dBYRr4Gpg473z2g.s['180']++;this.repositionitem(this._videowidth,this._videoheight);}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['24'][1]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['181']++;this.repositionitem(plugin.get('offsetWidth'),plugin.get('offsetHeight'));}}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['23'][1]++;}}},context:this,sync:true};__cov_FKaCM57dBYRr4Gpg473z2g.s['182']++;Y.io(this.get('metainfouri'),config);},enable:function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['24']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['183']++;var _this=this;__cov_FKaCM57dBYRr4Gpg473z2g.s['184']++;return Y.one('body').all('a[rel^=mediabox], area[rel^=mediabox], a[data-mediabox], area[data-mediabox]').on('click',function(e){__cov_FKaCM57dBYRr4Gpg473z2g.f['25']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['185']++;e.preventDefault();__cov_FKaCM57dBYRr4Gpg473z2g.s['186']++;_this.start(Y.one(e.currentTarget));__cov_FKaCM57dBYRr4Gpg473z2g.s['187']++;return false;});},enablenav:function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['26']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['188']++;var _this=this;__cov_FKaCM57dBYRr4Gpg473z2g.s['189']++;this.keyboardnav=Y.one(document).on('keyup',function(e){__cov_FKaCM57dBYRr4Gpg473z2g.f['27']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['190']++;_this.keyboardaction(e);});},keyboardaction:function(e){__cov_FKaCM57dBYRr4Gpg473z2g.f['28']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['191']++;var KEYCODE_ESC,KEYCODE_LEFTARROW,KEYCODE_RIGHTARROW,key,keycode;__cov_FKaCM57dBYRr4Gpg473z2g.s['192']++;KEYCODE_ESC=27;__cov_FKaCM57dBYRr4Gpg473z2g.s['193']++;KEYCODE_LEFTARROW=37;__cov_FKaCM57dBYRr4Gpg473z2g.s['194']++;KEYCODE_RIGHTARROW=39;__cov_FKaCM57dBYRr4Gpg473z2g.s['195']++;keycode=event.keyCode;__cov_FKaCM57dBYRr4Gpg473z2g.s['196']++;key=String.fromCharCode(keycode).toLowerCase();__cov_FKaCM57dBYRr4Gpg473z2g.s['197']++;if((__cov_FKaCM57dBYRr4Gpg473z2g.b['26'][0]++,keycode===KEYCODE_ESC)||(__cov_FKaCM57dBYRr4Gpg473z2g.b['26'][1]++,key.match(/x|o|c/))){__cov_FKaCM57dBYRr4Gpg473z2g.b['25'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['198']++;this.stop();}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['25'][1]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['199']++;if((__cov_FKaCM57dBYRr4Gpg473z2g.b['28'][0]++,key==='p')||(__cov_FKaCM57dBYRr4Gpg473z2g.b['28'][1]++,keycode===KEYCODE_LEFTARROW)){__cov_FKaCM57dBYRr4Gpg473z2g.b['27'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['200']++;if(this.currentitemindex!==0){__cov_FKaCM57dBYRr4Gpg473z2g.b['29'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['201']++;this.changeitem(this.currentitemindex-1);}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['29'][1]++;}}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['27'][1]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['202']++;if((__cov_FKaCM57dBYRr4Gpg473z2g.b['31'][0]++,key==='n')||(__cov_FKaCM57dBYRr4Gpg473z2g.b['31'][1]++,keycode===KEYCODE_RIGHTARROW)){__cov_FKaCM57dBYRr4Gpg473z2g.b['30'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['203']++;if(this.currentitemindex!==this.album.length-1){__cov_FKaCM57dBYRr4Gpg473z2g.b['32'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['204']++;this.changeitem(this.currentitemindex+1);}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['32'][1]++;}}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['30'][1]++;}}}},repositionitem:function(width,height){__cov_FKaCM57dBYRr4Gpg473z2g.f['29']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['205']++;var offsetTop,offsetLeft,newwidth,newheight;__cov_FKaCM57dBYRr4Gpg473z2g.s['206']++;var content=Y.one('#mediabox-content');__cov_FKaCM57dBYRr4Gpg473z2g.s['207']++;var innercontent=content.get('children').get(0)[0];__cov_FKaCM57dBYRr4Gpg473z2g.s['208']++;if((__cov_FKaCM57dBYRr4Gpg473z2g.b['34'][0]++,this.currentitem.getAttribute('data-player')==='2')||(__cov_FKaCM57dBYRr4Gpg473z2g.b['34'][1]++,this.currentitem.getAttribute('data-type')==='external')){__cov_FKaCM57dBYRr4Gpg473z2g.b['33'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['209']++;if(content.one('.mediaplugin.flow')){__cov_FKaCM57dBYRr4Gpg473z2g.b['35'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['210']++;width=this._videowidth;__cov_FKaCM57dBYRr4Gpg473z2g.s['211']++;height=this._videoheight;}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['35'][1]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['212']++;width=innercontent.get('offsetWidth');__cov_FKaCM57dBYRr4Gpg473z2g.s['213']++;height=innercontent.get('offsetHeight');}}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['33'][1]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['214']++;if(this.currentitem.getAttribute('data-player')==='0'){__cov_FKaCM57dBYRr4Gpg473z2g.b['36'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['215']++;width=this._audiowidth;__cov_FKaCM57dBYRr4Gpg473z2g.s['216']++;height=this._audioheight;}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['36'][1]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['217']++;if(width===undefined){__cov_FKaCM57dBYRr4Gpg473z2g.b['37'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['218']++;width=innercontent.get('naturalWidth');__cov_FKaCM57dBYRr4Gpg473z2g.s['219']++;height=innercontent.get('naturalHeight');}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['37'][1]++;}}}__cov_FKaCM57dBYRr4Gpg473z2g.s['220']++;var winwidth=Y.one('body').get('winWidth');__cov_FKaCM57dBYRr4Gpg473z2g.s['221']++;var winheight=Y.one('body').get('winHeight');__cov_FKaCM57dBYRr4Gpg473z2g.s['222']++;var maxwidth=winwidth-this.sidebarwidth();__cov_FKaCM57dBYRr4Gpg473z2g.s['223']++;var maxheight=winheight-this._navbarheight;__cov_FKaCM57dBYRr4Gpg473z2g.s['224']++;var newwidth='';__cov_FKaCM57dBYRr4Gpg473z2g.s['225']++;var newheight='';__cov_FKaCM57dBYRr4Gpg473z2g.s['226']++;if((__cov_FKaCM57dBYRr4Gpg473z2g.b['39'][0]++,width>maxwidth)||(__cov_FKaCM57dBYRr4Gpg473z2g.b['39'][1]++,height>maxheight)){__cov_FKaCM57dBYRr4Gpg473z2g.b['38'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['227']++;if(width/maxwidth>height/maxheight){__cov_FKaCM57dBYRr4Gpg473z2g.b['40'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['228']++;newwidth=maxwidth;__cov_FKaCM57dBYRr4Gpg473z2g.s['229']++;newheight=parseInt(height/(width/maxwidth),10);__cov_FKaCM57dBYRr4Gpg473z2g.s['230']++;offsetLeft=0;__cov_FKaCM57dBYRr4Gpg473z2g.s['231']++;offsetTop=(winheight-newheight)/2;}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['40'][1]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['232']++;newheight=maxheight;__cov_FKaCM57dBYRr4Gpg473z2g.s['233']++;newwidth=parseInt(width/(height/maxheight),10);__cov_FKaCM57dBYRr4Gpg473z2g.s['234']++;offsetTop=0;__cov_FKaCM57dBYRr4Gpg473z2g.s['235']++;offsetLeft=(winwidth-newwidth-this.sidebarwidth())/2;}__cov_FKaCM57dBYRr4Gpg473z2g.s['236']++;newwidth+='px';__cov_FKaCM57dBYRr4Gpg473z2g.s['237']++;newheight+='px';}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['38'][1]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['238']++;offsetLeft=(winwidth-width-this.sidebarwidth())/2;__cov_FKaCM57dBYRr4Gpg473z2g.s['239']++;offsetTop=(winheight-height-this._navbarheight)/2;}__cov_FKaCM57dBYRr4Gpg473z2g.s['240']++;innercontent.setStyle('width',newwidth);__cov_FKaCM57dBYRr4Gpg473z2g.s['241']++;innercontent.setStyle('height',newheight);__cov_FKaCM57dBYRr4Gpg473z2g.s['242']++;if(this.currentitem.getAttribute('data-player')==='0'){__cov_FKaCM57dBYRr4Gpg473z2g.b['41'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['243']++;if(content.one('.mediaplugin object')){__cov_FKaCM57dBYRr4Gpg473z2g.b['42'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['244']++;content.one('.mediaplugin object').setStyle('width',newwidth);}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['42'][1]++;}}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['41'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['245']++;content.setStyle('top',offsetTop+'px');__cov_FKaCM57dBYRr4Gpg473z2g.s['246']++;content.setStyle('left',offsetLeft+'px');},resizeoverlay:function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['30']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['247']++;var viewportwidth=Y.one('body').get('docWidth');__cov_FKaCM57dBYRr4Gpg473z2g.s['248']++;var viewportheight=Y.one('body').get('docHeight');__cov_FKaCM57dBYRr4Gpg473z2g.s['249']++;this.overlay.setStyle('width',viewportwidth);__cov_FKaCM57dBYRr4Gpg473z2g.s['250']++;this.overlay.setStyle('height',viewportheight);},sidebarwidth:function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['31']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['251']++;if(this.mediabox.hasClass('sidebarhidden')){__cov_FKaCM57dBYRr4Gpg473z2g.b['43'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['252']++;return 0;}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['43'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['253']++;return this._sidebarwidth;},start:function(target){__cov_FKaCM57dBYRr4Gpg473z2g.f['32']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['254']++;var _this=this;__cov_FKaCM57dBYRr4Gpg473z2g.s['255']++;Y.on('windowresize',function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['33']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['256']++;_this.resizeoverlay();__cov_FKaCM57dBYRr4Gpg473z2g.s['257']++;_this.repositionitem();});__cov_FKaCM57dBYRr4Gpg473z2g.s['258']++;Y.one('body').addClass('noscroll mediaboxactive');__cov_FKaCM57dBYRr4Gpg473z2g.s['259']++;this.overlay.setStyle('display','block');__cov_FKaCM57dBYRr4Gpg473z2g.s['260']++;this.mediabox.setStyle('display','block');__cov_FKaCM57dBYRr4Gpg473z2g.s['261']++;var itemnumber=0;__cov_FKaCM57dBYRr4Gpg473z2g.s['262']++;for(var i=0;i<this.album.length;i++){__cov_FKaCM57dBYRr4Gpg473z2g.s['263']++;if(this.album[i].getAttribute('href')===target.getAttribute('href')){__cov_FKaCM57dBYRr4Gpg473z2g.b['44'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['264']++;itemnumber=i;}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['44'][1]++;}}__cov_FKaCM57dBYRr4Gpg473z2g.s['265']++;if(this.currentitemindex!==itemnumber){__cov_FKaCM57dBYRr4Gpg473z2g.b['45'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['266']++;Y.one('#mediabox-content').empty();}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['45'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['267']++;this.setfullscreenimg();__cov_FKaCM57dBYRr4Gpg473z2g.s['268']++;this.changeitem(itemnumber);__cov_FKaCM57dBYRr4Gpg473z2g.s['269']++;this.enablenav();},setfullscreenimg:function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['34']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['270']++;if(!Y.one('#mediabox-sidebar-actions .fullscreen')){__cov_FKaCM57dBYRr4Gpg473z2g.b['46'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['271']++;return;}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['46'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['272']++;var imgurl=M.util.image_url('fullscreen','mod_mediagallery');__cov_FKaCM57dBYRr4Gpg473z2g.s['273']++;if(screenfull.isFullscreen){__cov_FKaCM57dBYRr4Gpg473z2g.b['47'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['274']++;imgurl=M.util.image_url('fullscreenexit','mod_mediagallery');}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['47'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['275']++;Y.one('#mediabox-sidebar-actions .fullscreen').setAttribute('src',imgurl);},stop:function(){__cov_FKaCM57dBYRr4Gpg473z2g.f['35']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['276']++;if(screenfull.isFullscreen){__cov_FKaCM57dBYRr4Gpg473z2g.b['48'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['277']++;screenfull.exit();}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['48'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['278']++;this.disablenav();__cov_FKaCM57dBYRr4Gpg473z2g.s['279']++;Y.one('body').removeClass('noscroll mediaboxactive');__cov_FKaCM57dBYRr4Gpg473z2g.s['280']++;this.overlay.setStyle('display','');__cov_FKaCM57dBYRr4Gpg473z2g.s['281']++;this.mediabox.setStyle('display','');},update_likes:function(likes,likedbyme){__cov_FKaCM57dBYRr4Gpg473z2g.f['36']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['282']++;var str='';__cov_FKaCM57dBYRr4Gpg473z2g.s['283']++;if(likes>0){__cov_FKaCM57dBYRr4Gpg473z2g.b['49'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['284']++;str='&nbsp;&bull;&nbsp;';__cov_FKaCM57dBYRr4Gpg473z2g.s['285']++;str+=M.str.mod_mediagallery.likedby+': ';__cov_FKaCM57dBYRr4Gpg473z2g.s['286']++;if(likedbyme){__cov_FKaCM57dBYRr4Gpg473z2g.b['50'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['287']++;likes=likes-1;__cov_FKaCM57dBYRr4Gpg473z2g.s['288']++;str+=M.str.mod_mediagallery.you+', ';}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['50'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['289']++;str+=likes+' ';__cov_FKaCM57dBYRr4Gpg473z2g.s['290']++;if(likes!==1){__cov_FKaCM57dBYRr4Gpg473z2g.b['51'][0]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['291']++;str+=M.str.mod_mediagallery.others;}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['51'][1]++;__cov_FKaCM57dBYRr4Gpg473z2g.s['292']++;str+=M.str.mod_mediagallery.other;}}else{__cov_FKaCM57dBYRr4Gpg473z2g.b['49'][1]++;}__cov_FKaCM57dBYRr4Gpg473z2g.s['293']++;Y.one('#mediabox-likedby').setHTML(str);}},{NAME:'moodle-mod_mediagallery-mediabox',ATTRS:{enablecomments:{value:true,validator:function(val){__cov_FKaCM57dBYRr4Gpg473z2g.f['37']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['294']++;return Y.Lang.isBoolean(val);}},enablelikes:{value:true,validator:function(val){__cov_FKaCM57dBYRr4Gpg473z2g.f['38']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['295']++;return Y.Lang.isBoolean(val);}},metainfouri:{value:'',validator:function(val){__cov_FKaCM57dBYRr4Gpg473z2g.f['39']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['296']++;return Y.Lang.isString(val);}},dataidfield:{value:'data-id',validator:function(val){__cov_FKaCM57dBYRr4Gpg473z2g.f['40']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['297']++;return Y.Lang.isString(val);}},metainfodata:{value:{},validator:function(val){__cov_FKaCM57dBYRr4Gpg473z2g.f['41']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['298']++;return Y.Lang.isObject(val);}}}});__cov_FKaCM57dBYRr4Gpg473z2g.s['299']++;M.mod_mediagallery=(__cov_FKaCM57dBYRr4Gpg473z2g.b['52'][0]++,M.mod_mediagallery)||(__cov_FKaCM57dBYRr4Gpg473z2g.b['52'][1]++,{});__cov_FKaCM57dBYRr4Gpg473z2g.s['300']++;M.mod_mediagallery.init_mediabox=function(params){__cov_FKaCM57dBYRr4Gpg473z2g.f['42']++;__cov_FKaCM57dBYRr4Gpg473z2g.s['301']++;return new MEDIABOX(params);};},'@VERSION@',{'requires':['base','node','selector-css3']});
